#!/usr/bin/env ruby
require 'batch_job'

# Start a batch_job server instance
# Parameters
#   server_name
begin
  BatchJob::Server.run(ARGV[0])
rescue => exc
  # Failsafe logger that writes to STDERROR
  SemanticLogger.add_appender(STDERROR, :error, &SemanticLogger::Appender::Base.colorized_formatter)
  SemanticLogger['BatchJob'].error('Batch Job shutting down due to exception', exc)
  SemanticLogger.flush
  exit 1
end
